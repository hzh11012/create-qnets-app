import M from"node:fs";import R from"node:path";import{fileURLToPath as zt}from"node:url";import Ut from"child_process";import W from"path";import V from"fs";import Kt from"readline";import Gt from"events";var Jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Y(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var j={exports:{}},z,ke;function Zt(){if(ke)return z;ke=1,z=e,e.sync=a;var t=V;function o(l,r){var f=r.pathExt!==void 0?r.pathExt:process.env.PATHEXT;if(!f||(f=f.split(";"),f.indexOf("")!==-1))return!0;for(var i=0;i<f.length;i++){var n=f[i].toLowerCase();if(n&&l.substr(-n.length).toLowerCase()===n)return!0}return!1}function d(l,r,f){return!l.isSymbolicLink()&&!l.isFile()?!1:o(r,f)}function e(l,r,f){t.stat(l,function(i,n){f(i,i?!1:d(n,l,r))})}function a(l,r){return d(t.statSync(l),l,r)}return z}var U,He;function Xt(){if(He)return U;He=1,U=o,o.sync=d;var t=V;function o(l,r,f){t.stat(l,function(i,n){f(i,i?!1:e(n,r))})}function d(l,r){return e(t.statSync(l),r)}function e(l,r){return l.isFile()&&a(l,r)}function a(l,r){var f=l.mode,i=l.uid,n=l.gid,s=r.uid!==void 0?r.uid:process.getuid&&process.getuid(),h=r.gid!==void 0?r.gid:process.getgid&&process.getgid(),m=parseInt("100",8),u=parseInt("010",8),c=parseInt("001",8),p=m|u,b=f&c||f&u&&n===h||f&m&&i===s||f&p&&s===0;return b}return U}var K,Le;function Qt(){if(Le)return K;Le=1;var t;process.platform==="win32"||Jt.TESTING_WINDOWS?t=Zt():t=Xt(),K=o,o.sync=d;function o(e,a,l){if(typeof a=="function"&&(l=a,a={}),!l){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,f){o(e,a||{},function(i,n){i?f(i):r(n)})})}t(e,a||{},function(r,f){r&&(r.code==="EACCES"||a&&a.ignoreErrors)&&(r=null,f=!1),l(r,f)})}function d(e,a){try{return t.sync(e,a||{})}catch(l){if(a&&a.ignoreErrors||l.code==="EACCES")return!1;throw l}}return K}var G,We;function ei(){if(We)return G;We=1;const t=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",o=W,d=t?";":":",e=Qt(),a=i=>Object.assign(new Error(`not found: ${i}`),{code:"ENOENT"}),l=(i,n)=>{const s=n.colon||d,h=i.match(/\//)||t&&i.match(/\\/)?[""]:[...t?[process.cwd()]:[],...(n.path||process.env.PATH||"").split(s)],m=t?n.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",u=t?m.split(s):[""];return t&&i.indexOf(".")!==-1&&u[0]!==""&&u.unshift(""),{pathEnv:h,pathExt:u,pathExtExe:m}},r=(i,n,s)=>{typeof n=="function"&&(s=n,n={}),n||(n={});const{pathEnv:h,pathExt:m,pathExtExe:u}=l(i,n),c=[],p=x=>new Promise((O,S)=>{if(x===h.length)return n.all&&c.length?O(c):S(a(i));const g=h[x],v=/^".*"$/.test(g)?g.slice(1,-1):g,y=o.join(v,i),w=!v&&/^\.[\\\/]/.test(i)?i.slice(0,2)+y:y;O(b(w,x,0))}),b=(x,O,S)=>new Promise((g,v)=>{if(S===m.length)return g(p(O+1));const y=m[S];e(x+y,{pathExt:u},(w,$)=>{if(!w&&$)if(n.all)c.push(x+y);else return g(x+y);return g(b(x,O,S+1))})});return s?p(0).then(x=>s(null,x),s):p(0)},f=(i,n)=>{n=n||{};const{pathEnv:s,pathExt:h,pathExtExe:m}=l(i,n),u=[];for(let c=0;c<s.length;c++){const p=s[c],b=/^".*"$/.test(p)?p.slice(1,-1):p,x=o.join(b,i),O=!b&&/^\.[\\\/]/.test(i)?i.slice(0,2)+x:x;for(let S=0;S<h.length;S++){const g=O+h[S];try{if(e.sync(g,{pathExt:m}))if(n.all)u.push(g);else return g}catch{}}}if(n.all&&u.length)return u;if(n.nothrow)return null;throw a(i)};return G=r,r.sync=f,G}var k={exports:{}},Ve;function ti(){if(Ve)return k.exports;Ve=1;const t=(o={})=>{const d=o.env||process.env;return(o.platform||process.platform)!=="win32"?"PATH":Object.keys(d).reverse().find(a=>a.toUpperCase()==="PATH")||"Path"};return k.exports=t,k.exports.default=t,k.exports}var J,ze;function ii(){if(ze)return J;ze=1;const t=W,o=ei(),d=ti();function e(l,r){const f=l.options.env||process.env,i=process.cwd(),n=l.options.cwd!=null,s=n&&process.chdir!==void 0&&!process.chdir.disabled;if(s)try{process.chdir(l.options.cwd)}catch{}let h;try{h=o.sync(l.command,{path:f[d({env:f})],pathExt:r?t.delimiter:void 0})}catch{}finally{s&&process.chdir(i)}return h&&(h=t.resolve(n?l.options.cwd:"",h)),h}function a(l){return e(l)||e(l,!0)}return J=a,J}var H={},Ue;function ri(){if(Ue)return H;Ue=1;const t=/([()\][%!^"`<>&|;, *?])/g;function o(e){return e=e.replace(t,"^$1"),e}function d(e,a){return e=`${e}`,e=e.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),e=e.replace(/(?=(\\+?)?)\1$/,"$1$1"),e=`"${e}"`,e=e.replace(t,"^$1"),a&&(e=e.replace(t,"^$1")),e}return H.command=o,H.argument=d,H}var Z,Ke;function si(){return Ke||(Ke=1,Z=/^#!(.*)/),Z}var X,Ge;function ni(){if(Ge)return X;Ge=1;const t=si();return X=(o="")=>{const d=o.match(t);if(!d)return null;const[e,a]=d[0].replace(/#! ?/,"").split(" "),l=e.split("/").pop();return l==="env"?a:a?`${l} ${a}`:l},X}var Q,Je;function oi(){if(Je)return Q;Je=1;const t=V,o=ni();function d(e){const l=Buffer.alloc(150);let r;try{r=t.openSync(e,"r"),t.readSync(r,l,0,150,0),t.closeSync(r)}catch{}return o(l.toString())}return Q=d,Q}var ee,Ze;function li(){if(Ze)return ee;Ze=1;const t=W,o=ii(),d=ri(),e=oi(),a=process.platform==="win32",l=/\.(?:com|exe)$/i,r=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function f(s){s.file=o(s);const h=s.file&&e(s.file);return h?(s.args.unshift(s.file),s.command=h,o(s)):s.file}function i(s){if(!a)return s;const h=f(s),m=!l.test(h);if(s.options.forceShell||m){const u=r.test(h);s.command=t.normalize(s.command),s.command=d.command(s.command),s.args=s.args.map(p=>d.argument(p,u));const c=[s.command].concat(s.args).join(" ");s.args=["/d","/s","/c",`"${c}"`],s.command=process.env.comspec||"cmd.exe",s.options.windowsVerbatimArguments=!0}return s}function n(s,h,m){h&&!Array.isArray(h)&&(m=h,h=null),h=h?h.slice(0):[],m=Object.assign({},m);const u={command:s,args:h,options:m,file:void 0,original:{command:s,args:h}};return m.shell?u:i(u)}return ee=n,ee}var te,Xe;function ai(){if(Xe)return te;Xe=1;const t=process.platform==="win32";function o(l,r){return Object.assign(new Error(`${r} ${l.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${r} ${l.command}`,path:l.command,spawnargs:l.args})}function d(l,r){if(!t)return;const f=l.emit;l.emit=function(i,n){if(i==="exit"){const s=e(n,r);if(s)return f.call(l,"error",s)}return f.apply(l,arguments)}}function e(l,r){return t&&l===1&&!r.file?o(r.original,"spawn"):null}function a(l,r){return t&&l===1&&!r.file?o(r.original,"spawnSync"):null}return te={hookChildProcess:d,verifyENOENT:e,verifyENOENTSync:a,notFoundError:o},te}var Qe;function hi(){if(Qe)return j.exports;Qe=1;const t=Ut,o=li(),d=ai();function e(l,r,f){const i=o(l,r,f),n=t.spawn(i.command,i.args,i.options);return d.hookChildProcess(n,i),n}function a(l,r,f){const i=o(l,r,f),n=t.spawnSync(i.command,i.args,i.options);return n.error=n.error||d.verifyENOENTSync(n.status,i),n}return j.exports=e,j.exports.spawn=e,j.exports.sync=a,j.exports._parse=o,j.exports._enoent=d,j.exports}var ui=hi();const ci=Y(ui);var ie,et;function di(){if(et)return ie;et=1;function t(e,a){var l=e;a.slice(0,-1).forEach(function(f){l=l[f]||{}});var r=a[a.length-1];return r in l}function o(e){return typeof e=="number"||/^0x[0-9a-f]+$/i.test(e)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}function d(e,a){return a==="constructor"&&typeof e[a]=="function"||a==="__proto__"}return ie=function(e,a){a||(a={});var l={bools:{},strings:{},unknownFn:null};typeof a.unknown=="function"&&(l.unknownFn=a.unknown),typeof a.boolean=="boolean"&&a.boolean?l.allBools=!0:[].concat(a.boolean).filter(Boolean).forEach(function(w){l.bools[w]=!0});var r={};function f(w){return r[w].some(function($){return l.bools[$]})}Object.keys(a.alias||{}).forEach(function(w){r[w]=[].concat(a.alias[w]),r[w].forEach(function($){r[$]=[w].concat(r[w].filter(function(C){return $!==C}))})}),[].concat(a.string).filter(Boolean).forEach(function(w){l.strings[w]=!0,r[w]&&[].concat(r[w]).forEach(function($){l.strings[$]=!0})});var i=a.default||{},n={_:[]};function s(w,$){return l.allBools&&/^--[^=]+$/.test($)||l.strings[w]||l.bools[w]||r[w]}function h(w,$,C){for(var E=w,N=0;N<$.length-1;N++){var q=$[N];if(d(E,q))return;E[q]===void 0&&(E[q]={}),(E[q]===Object.prototype||E[q]===Number.prototype||E[q]===String.prototype)&&(E[q]={}),E[q]===Array.prototype&&(E[q]=[]),E=E[q]}var _=$[$.length-1];d(E,_)||((E===Object.prototype||E===Number.prototype||E===String.prototype)&&(E={}),E===Array.prototype&&(E=[]),E[_]===void 0||l.bools[_]||typeof E[_]=="boolean"?E[_]=C:Array.isArray(E[_])?E[_].push(C):E[_]=[E[_],C])}function m(w,$,C){if(!(C&&l.unknownFn&&!s(w,C)&&l.unknownFn(C)===!1)){var E=!l.strings[w]&&o($)?Number($):$;h(n,w.split("."),E),(r[w]||[]).forEach(function(N){h(n,N.split("."),E)})}}Object.keys(l.bools).forEach(function(w){m(w,i[w]===void 0?!1:i[w])});var u=[];e.indexOf("--")!==-1&&(u=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var c=0;c<e.length;c++){var p=e[c],b,x;if(/^--.+=/.test(p)){var O=p.match(/^--([^=]+)=([\s\S]*)$/);b=O[1];var S=O[2];l.bools[b]&&(S=S!=="false"),m(b,S,p)}else if(/^--no-.+/.test(p))b=p.match(/^--no-(.+)/)[1],m(b,!1,p);else if(/^--.+/.test(p))b=p.match(/^--(.+)/)[1],x=e[c+1],x!==void 0&&!/^(-|--)[^-]/.test(x)&&!l.bools[b]&&!l.allBools&&(!r[b]||!f(b))?(m(b,x,p),c+=1):/^(true|false)$/.test(x)?(m(b,x==="true",p),c+=1):m(b,l.strings[b]?"":!0,p);else if(/^-[^-]+/.test(p)){for(var g=p.slice(1,-1).split(""),v=!1,y=0;y<g.length;y++){if(x=p.slice(y+2),x==="-"){m(g[y],x,p);continue}if(/[A-Za-z]/.test(g[y])&&x[0]==="="){m(g[y],x.slice(1),p),v=!0;break}if(/[A-Za-z]/.test(g[y])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(x)){m(g[y],x,p),v=!0;break}if(g[y+1]&&g[y+1].match(/\W/)){m(g[y],p.slice(y+2),p),v=!0;break}else m(g[y],l.strings[g[y]]?"":!0,p)}b=p.slice(-1)[0],!v&&b!=="-"&&(e[c+1]&&!/^(-|--)[^-]/.test(e[c+1])&&!l.bools[b]&&(!r[b]||!f(b))?(m(b,e[c+1],p),c+=1):e[c+1]&&/^(true|false)$/.test(e[c+1])?(m(b,e[c+1]==="true",p),c+=1):m(b,l.strings[b]?"":!0,p))}else if((!l.unknownFn||l.unknownFn(p)!==!1)&&n._.push(l.strings._||!o(p)?p:Number(p)),a.stopEarly){n._.push.apply(n._,e.slice(c+1));break}}return Object.keys(i).forEach(function(w){t(n,w.split("."))||(h(n,w.split("."),i[w]),(r[w]||[]).forEach(function($){h(n,$.split("."),i[w])}))}),a["--"]?n["--"]=u.slice():u.forEach(function(w){n._.push(w)}),n},ie}var fi=di();const mi=Y(fi);var re={},se,tt;function P(){if(tt)return se;tt=1;const{FORCE_COLOR:t,NODE_DISABLE_COLORS:o,TERM:d}=process.env,e={enabled:!o&&d!=="dumb"&&t!=="0",reset:r(0,0),bold:r(1,22),dim:r(2,22),italic:r(3,23),underline:r(4,24),inverse:r(7,27),hidden:r(8,28),strikethrough:r(9,29),black:r(30,39),red:r(31,39),green:r(32,39),yellow:r(33,39),blue:r(34,39),magenta:r(35,39),cyan:r(36,39),white:r(37,39),gray:r(90,39),grey:r(90,39),bgBlack:r(40,49),bgRed:r(41,49),bgGreen:r(42,49),bgYellow:r(43,49),bgBlue:r(44,49),bgMagenta:r(45,49),bgCyan:r(46,49),bgWhite:r(47,49)};function a(f,i){let n=0,s,h="",m="";for(;n<f.length;n++)s=f[n],h+=s.open,m+=s.close,i.includes(s.close)&&(i=i.replace(s.rgx,s.close+s.open));return h+i+m}function l(f,i){let n={has:f,keys:i};return n.reset=e.reset.bind(n),n.bold=e.bold.bind(n),n.dim=e.dim.bind(n),n.italic=e.italic.bind(n),n.underline=e.underline.bind(n),n.inverse=e.inverse.bind(n),n.hidden=e.hidden.bind(n),n.strikethrough=e.strikethrough.bind(n),n.black=e.black.bind(n),n.red=e.red.bind(n),n.green=e.green.bind(n),n.yellow=e.yellow.bind(n),n.blue=e.blue.bind(n),n.magenta=e.magenta.bind(n),n.cyan=e.cyan.bind(n),n.white=e.white.bind(n),n.gray=e.gray.bind(n),n.grey=e.grey.bind(n),n.bgBlack=e.bgBlack.bind(n),n.bgRed=e.bgRed.bind(n),n.bgGreen=e.bgGreen.bind(n),n.bgYellow=e.bgYellow.bind(n),n.bgBlue=e.bgBlue.bind(n),n.bgMagenta=e.bgMagenta.bind(n),n.bgCyan=e.bgCyan.bind(n),n.bgWhite=e.bgWhite.bind(n),n}function r(f,i){let n={open:`\x1B[${f}m`,close:`\x1B[${i}m`,rgx:new RegExp(`\\x1b\\[${i}m`,"g")};return function(s){return this!==void 0&&this.has!==void 0?(this.has.includes(f)||(this.has.push(f),this.keys.push(n)),s===void 0?this:e.enabled?a(this.keys,s+""):s+""):s===void 0?l([f],[n]):e.enabled?a([n],s+""):s+""}}return se=e,se}var ne,it;function pi(){return it||(it=1,ne=(t,o)=>{if(!(t.meta&&t.name!=="escape")){if(t.ctrl){if(t.name==="a")return"first";if(t.name==="c"||t.name==="d")return"abort";if(t.name==="e")return"last";if(t.name==="g")return"reset"}if(o){if(t.name==="j")return"down";if(t.name==="k")return"up"}return t.name==="return"||t.name==="enter"?"submit":t.name==="backspace"?"delete":t.name==="delete"?"deleteForward":t.name==="abort"?"abort":t.name==="escape"?"exit":t.name==="tab"?"next":t.name==="pagedown"?"nextPage":t.name==="pageup"?"prevPage":t.name==="home"?"home":t.name==="end"?"end":t.name==="up"?"up":t.name==="down"?"down":t.name==="right"?"right":t.name==="left"?"left":!1}}),ne}var oe,rt;function le(){return rt||(rt=1,oe=t=>{const o=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),d=new RegExp(o,"g");return typeof t=="string"?t.replace(d,""):t}),oe}var ae,st;function T(){if(st)return ae;st=1;const t="\x1B",o=`${t}[`,d="\x07",e={to(r,f){return f?`${o}${f+1};${r+1}H`:`${o}${r+1}G`},move(r,f){let i="";return r<0?i+=`${o}${-r}D`:r>0&&(i+=`${o}${r}C`),f<0?i+=`${o}${-f}A`:f>0&&(i+=`${o}${f}B`),i},up:(r=1)=>`${o}${r}A`,down:(r=1)=>`${o}${r}B`,forward:(r=1)=>`${o}${r}C`,backward:(r=1)=>`${o}${r}D`,nextLine:(r=1)=>`${o}E`.repeat(r),prevLine:(r=1)=>`${o}F`.repeat(r),left:`${o}G`,hide:`${o}?25l`,show:`${o}?25h`,save:`${t}7`,restore:`${t}8`},a={up:(r=1)=>`${o}S`.repeat(r),down:(r=1)=>`${o}T`.repeat(r)},l={screen:`${o}2J`,up:(r=1)=>`${o}1J`.repeat(r),down:(r=1)=>`${o}J`.repeat(r),line:`${o}2K`,lineEnd:`${o}K`,lineStart:`${o}1K`,lines(r){let f="";for(let i=0;i<r;i++)f+=this.line+(i<r-1?e.up():"");return r&&(f+=e.left),f}};return ae={cursor:e,scroll:a,erase:l,beep:d},ae}var he,nt;function gi(){if(nt)return he;nt=1;const t=le(),{erase:o,cursor:d}=T(),e=a=>[...t(a)].length;return he=function(a,l){if(!l)return o.line+d.to(0);let r=0;const f=a.split(/\r?\n/);for(let i of f)r+=1+Math.floor(Math.max(e(i)-1,0)/l);return o.lines(r)},he}var ue,ot;function lt(){if(ot)return ue;ot=1;const t={arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",radioOn:"\u25C9",radioOff:"\u25EF",tick:"\u2714",cross:"\u2716",ellipsis:"\u2026",pointerSmall:"\u203A",line:"\u2500",pointer:"\u276F"},o={arrowUp:t.arrowUp,arrowDown:t.arrowDown,arrowLeft:t.arrowLeft,arrowRight:t.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"\u221A",cross:"\xD7",ellipsis:"...",pointerSmall:"\xBB",line:"\u2500",pointer:">"};return ue=process.platform==="win32"?o:t,ue}var ce,at;function bi(){if(at)return ce;at=1;const t=P(),o=lt(),d=Object.freeze({password:{scale:1,render:i=>"*".repeat(i.length)},emoji:{scale:2,render:i=>"\u{1F603}".repeat(i.length)},invisible:{scale:0,render:i=>""},default:{scale:1,render:i=>`${i}`}}),e=i=>d[i]||d.default,a=Object.freeze({aborted:t.red(o.cross),done:t.green(o.tick),exited:t.yellow(o.cross),default:t.cyan("?")});return ce={styles:d,render:e,symbols:a,symbol:(i,n,s)=>n?a.aborted:s?a.exited:i?a.done:a.default,delimiter:i=>t.gray(i?o.ellipsis:o.pointerSmall),item:(i,n)=>t.gray(i?n?o.pointerSmall:"+":o.line)},ce}var de,ht;function vi(){if(ht)return de;ht=1;const t=le();return de=function(o,d){let e=String(t(o)||"").split(/\r?\n/);return d?e.map(a=>Math.ceil(a.length/d)).reduce((a,l)=>a+l):e.length},de}var fe,ut;function wi(){return ut||(ut=1,fe=(t,o={})=>{const d=Number.isSafeInteger(parseInt(o.margin))?new Array(parseInt(o.margin)).fill(" ").join(""):o.margin||"",e=o.width;return(t||"").split(/\r?\n/g).map(a=>a.split(/\s+/g).reduce((l,r)=>(r.length+d.length>=e||l[l.length-1].length+r.length+1<e?l[l.length-1]+=` ${r}`:l.push(`${d}${r}`),l),[d]).join(`
`)).join(`
`)}),fe}var me,ct;function xi(){return ct||(ct=1,me=(t,o,d)=>{d=d||o;let e=Math.min(o-d,t-Math.floor(d/2));e<0&&(e=0);let a=Math.min(e+d,o);return{startIndex:e,endIndex:a}}),me}var pe,dt;function D(){return dt||(dt=1,pe={action:pi(),clear:gi(),style:bi(),strip:le(),figures:lt(),lines:vi(),wrap:wi(),entriesToDisplay:xi()}),pe}var ge,ft;function A(){if(ft)return ge;ft=1;const t=Kt,{action:o}=D(),d=Gt,{beep:e,cursor:a}=T(),l=P();class r extends d{constructor(i={}){super(),this.firstRender=!0,this.in=i.stdin||process.stdin,this.out=i.stdout||process.stdout,this.onRender=(i.onRender||(()=>{})).bind(this);const n=t.createInterface({input:this.in,escapeCodeTimeout:50});t.emitKeypressEvents(this.in,n),this.in.isTTY&&this.in.setRawMode(!0);const s=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,h=(m,u)=>{let c=o(u,s);c===!1?this._&&this._(m,u):typeof this[c]=="function"?this[c](u):this.bell()};this.close=()=>{this.out.write(a.show),this.in.removeListener("keypress",h),this.in.isTTY&&this.in.setRawMode(!1),n.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",h)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(e)}render(){this.onRender(l),this.firstRender&&(this.firstRender=!1)}}return ge=r,ge}var be,mt;function yi(){if(mt)return be;mt=1;const t=P(),o=A(),{erase:d,cursor:e}=T(),{style:a,clear:l,lines:r,figures:f}=D();class i extends o{constructor(s={}){super(s),this.transform=a.render(s.style),this.scale=this.transform.scale,this.msg=s.message,this.initial=s.initial||"",this.validator=s.validate||(()=>!0),this.value="",this.errorMsg=s.error||"Please Enter A Valid Value",this.cursor=+!!this.initial,this.cursorOffset=0,this.clear=l("",this.out.columns),this.render()}set value(s){!s&&this.initial?(this.placeholder=!0,this.rendered=t.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(s)),this._value=s,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=+!!this.initial,this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let s=await this.validator(this.value);typeof s=="string"&&(this.errorMsg=s,s=!1),this.error=!s}async submit(){if(this.value=this.value||this.initial,this.cursorOffset=0,this.cursor=this.rendered.length,await this.validate(),this.error){this.red=!0,this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(s){this.placeholder||(this.cursor=this.cursor+s,this.cursorOffset+=s)}_(s,h){let m=this.value.slice(0,this.cursor),u=this.value.slice(this.cursor);this.value=`${m}${s}${u}`,this.red=!1,this.cursor=this.placeholder?0:m.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let s=this.value.slice(0,this.cursor-1),h=this.value.slice(this.cursor);this.value=`${s}${h}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let s=this.value.slice(0,this.cursor),h=this.value.slice(this.cursor+1);this.value=`${s}${h}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return this.cursor===0||this.placeholder&&this.cursor===1}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(e.down(r(this.outputError,this.out.columns)-1)+l(this.outputError,this.out.columns)),this.out.write(l(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[a.symbol(this.done,this.aborted),t.bold(this.msg),a.delimiter(this.done),this.red?t.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((s,h,m)=>s+`
${m?" ":f.pointerSmall} ${t.red().italic(h)}`,"")),this.out.write(d.line+e.to(0)+this.outputText+e.save+this.outputError+e.restore+e.move(this.cursorOffset,0)))}}return be=i,be}var ve,pt;function Si(){if(pt)return ve;pt=1;const t=P(),o=A(),{style:d,clear:e,figures:a,wrap:l,entriesToDisplay:r}=D(),{cursor:f}=T();class i extends o{constructor(s={}){super(s),this.msg=s.message,this.hint=s.hint||"- Use arrow-keys. Return to submit.",this.warn=s.warn||"- This option is disabled",this.cursor=s.initial||0,this.choices=s.choices.map((h,m)=>(typeof h=="string"&&(h={title:h,value:m}),{title:h&&(h.title||h.value||h),value:h&&(h.value===void 0?m:h.value),description:h&&h.description,selected:h&&h.selected,disabled:h&&h.disabled})),this.optionsPerPage=s.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=e("",this.out.columns),this.render()}moveCursor(s){this.cursor=s,this.value=this.choices[s].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){this.cursor===0?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(s,h){if(s===" ")return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(f.hide):this.out.write(e(this.outputText,this.out.columns)),super.render();let{startIndex:s,endIndex:h}=r(this.cursor,this.choices.length,this.optionsPerPage);if(this.outputText=[d.symbol(this.done,this.aborted),t.bold(this.msg),d.delimiter(!1),this.done?this.selection.title:this.selection.disabled?t.yellow(this.warn):t.gray(this.hint)].join(" "),!this.done){this.outputText+=`
`;for(let m=s;m<h;m++){let u,c,p="",b=this.choices[m];m===s&&s>0?c=a.arrowUp:m===h-1&&h<this.choices.length?c=a.arrowDown:c=" ",b.disabled?(u=this.cursor===m?t.gray().underline(b.title):t.strikethrough().gray(b.title),c=(this.cursor===m?t.bold().gray(a.pointer)+" ":"  ")+c):(u=this.cursor===m?t.cyan().underline(b.title):b.title,c=(this.cursor===m?t.cyan(a.pointer)+" ":"  ")+c,b.description&&this.cursor===m&&(p=` - ${b.description}`,(c.length+u.length+p.length>=this.out.columns||b.description.split(/\r?\n/).length>1)&&(p=`
`+l(b.description,{margin:3,width:this.out.columns})))),this.outputText+=`${c} ${u}${t.gray(p)}
`}}this.out.write(this.outputText)}}return ve=i,ve}var we,gt;function $i(){if(gt)return we;gt=1;const t=P(),o=A(),{style:d,clear:e}=D(),{cursor:a,erase:l}=T();class r extends o{constructor(i={}){super(i),this.msg=i.message,this.value=!!i.initial,this.active=i.active||"on",this.inactive=i.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}deactivate(){if(this.value===!1)return this.bell();this.value=!1,this.render()}activate(){if(this.value===!0)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(i,n){if(i===" ")this.value=!this.value;else if(i==="1")this.value=!0;else if(i==="0")this.value=!1;else return this.bell();this.render()}render(){this.closed||(this.firstRender?this.out.write(a.hide):this.out.write(e(this.outputText,this.out.columns)),super.render(),this.outputText=[d.symbol(this.done,this.aborted),t.bold(this.msg),d.delimiter(this.done),this.value?this.inactive:t.cyan().underline(this.inactive),t.gray("/"),this.value?t.cyan().underline(this.active):this.active].join(" "),this.out.write(l.line+a.to(0)+this.outputText))}}return we=r,we}var xe,bt;function I(){if(bt)return xe;bt=1;class t{constructor({token:d,date:e,parts:a,locales:l}){this.token=d,this.date=e||new Date,this.parts=a||[this],this.locales=l||{}}up(){}down(){}next(){const d=this.parts.indexOf(this);return this.parts.find((e,a)=>a>d&&e instanceof t)}setTo(d){}prev(){let d=[].concat(this.parts).reverse();const e=d.indexOf(this);return d.find((a,l)=>l>e&&a instanceof t)}toString(){return String(this.date)}}return xe=t,xe}var ye,vt;function Ei(){if(vt)return ye;vt=1;const t=I();class o extends t{constructor(e={}){super(e)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let e=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?e.toUpperCase():e}}return ye=o,ye}var Se,wt;function Oi(){if(wt)return Se;wt=1;const t=I(),o=e=>(e=e%10,e===1?"st":e===2?"nd":e===3?"rd":"th");class d extends t{constructor(a={}){super(a)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(a){this.date.setDate(parseInt(a.substr(-2)))}toString(){let a=this.date.getDate(),l=this.date.getDay();return this.token==="DD"?String(a).padStart(2,"0"):this.token==="Do"?a+o(a):this.token==="d"?l+1:this.token==="ddd"?this.locales.weekdaysShort[l]:this.token==="dddd"?this.locales.weekdays[l]:a}}return Se=d,Se}var $e,xt;function Ci(){if(xt)return $e;xt=1;const t=I();class o extends t{constructor(e={}){super(e)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(e){this.date.setHours(parseInt(e.substr(-2)))}toString(){let e=this.date.getHours();return/h/.test(this.token)&&(e=e%12||12),this.token.length>1?String(e).padStart(2,"0"):e}}return $e=o,$e}var Ee,yt;function Mi(){if(yt)return Ee;yt=1;const t=I();class o extends t{constructor(e={}){super(e)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(e){this.date.setMilliseconds(parseInt(e.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}}return Ee=o,Ee}var Oe,St;function Ri(){if(St)return Oe;St=1;const t=I();class o extends t{constructor(e={}){super(e)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(e){this.date.setMinutes(parseInt(e.substr(-2)))}toString(){let e=this.date.getMinutes();return this.token.length>1?String(e).padStart(2,"0"):e}}return Oe=o,Oe}var Ce,$t;function Pi(){if($t)return Ce;$t=1;const t=I();class o extends t{constructor(e={}){super(e)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(e){e=parseInt(e.substr(-2))-1,this.date.setMonth(e<0?0:e)}toString(){let e=this.date.getMonth(),a=this.token.length;return a===2?String(e+1).padStart(2,"0"):a===3?this.locales.monthsShort[e]:a===4?this.locales.months[e]:String(e+1)}}return Ce=o,Ce}var Me,Et;function Ti(){if(Et)return Me;Et=1;const t=I();class o extends t{constructor(e={}){super(e)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(e){this.date.setSeconds(parseInt(e.substr(-2)))}toString(){let e=this.date.getSeconds();return this.token.length>1?String(e).padStart(2,"0"):e}}return Me=o,Me}var Re,Ot;function qi(){if(Ot)return Re;Ot=1;const t=I();class o extends t{constructor(e={}){super(e)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(e){this.date.setFullYear(e.substr(-4))}toString(){let e=String(this.date.getFullYear()).padStart(4,"0");return this.token.length===2?e.substr(-2):e}}return Re=o,Re}var Pe,Ct;function Di(){return Ct||(Ct=1,Pe={DatePart:I(),Meridiem:Ei(),Day:Oi(),Hours:Ci(),Milliseconds:Mi(),Minutes:Ri(),Month:Pi(),Seconds:Ti(),Year:qi()}),Pe}var Te,Mt;function _i(){if(Mt)return Te;Mt=1;const t=P(),o=A(),{style:d,clear:e,figures:a}=D(),{erase:l,cursor:r}=T(),{DatePart:f,Meridiem:i,Day:n,Hours:s,Milliseconds:h,Minutes:m,Month:u,Seconds:c,Year:p}=Di(),b=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,x={1:({token:g})=>g.replace(/\\(.)/g,"$1"),2:g=>new n(g),3:g=>new u(g),4:g=>new p(g),5:g=>new i(g),6:g=>new s(g),7:g=>new m(g),8:g=>new c(g),9:g=>new h(g)},O={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};class S extends o{constructor(v={}){super(v),this.msg=v.message,this.cursor=0,this.typed="",this.locales=Object.assign(O,v.locales),this._date=v.initial||new Date,this.errorMsg=v.error||"Please Enter A Valid Value",this.validator=v.validate||(()=>!0),this.mask=v.mask||"YYYY-MM-DD HH:mm:ss",this.clear=e("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(v){v&&this._date.setTime(v.getTime())}set mask(v){let y;for(this.parts=[];y=b.exec(v);){let $=y.shift(),C=y.findIndex(E=>E!=null);this.parts.push(C in x?x[C]({token:y[C]||$,date:this.date,parts:this.parts,locales:this.locales}):y[C]||$)}let w=this.parts.reduce(($,C)=>(typeof C=="string"&&typeof $[$.length-1]=="string"?$[$.length-1]+=C:$.push(C),$),[]);this.parts.splice(0),this.parts.push(...w),this.reset()}moveCursor(v){this.typed="",this.cursor=v,this.fire()}reset(){this.moveCursor(this.parts.findIndex(v=>v instanceof f)),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let v=await this.validator(this.value);typeof v=="string"&&(this.errorMsg=v,v=!1),this.error=!v}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let v=this.parts[this.cursor].prev();if(v==null)return this.bell();this.moveCursor(this.parts.indexOf(v)),this.render()}right(){let v=this.parts[this.cursor].next();if(v==null)return this.bell();this.moveCursor(this.parts.indexOf(v)),this.render()}next(){let v=this.parts[this.cursor].next();this.moveCursor(v?this.parts.indexOf(v):this.parts.findIndex(y=>y instanceof f)),this.render()}_(v){/\d/.test(v)&&(this.typed+=v,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(r.hide):this.out.write(e(this.outputText,this.out.columns)),super.render(),this.outputText=[d.symbol(this.done,this.aborted),t.bold(this.msg),d.delimiter(!1),this.parts.reduce((v,y,w)=>v.concat(w===this.cursor&&!this.done?t.cyan().underline(y.toString()):y),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split(`
`).reduce((v,y,w)=>v+`
${w?" ":a.pointerSmall} ${t.red().italic(y)}`,"")),this.out.write(l.line+r.to(0)+this.outputText))}}return Te=S,Te}var qe,Rt;function Ii(){if(Rt)return qe;Rt=1;const t=P(),o=A(),{cursor:d,erase:e}=T(),{style:a,figures:l,clear:r,lines:f}=D(),i=/[0-9]/,n=m=>m!==void 0,s=(m,u)=>{let c=Math.pow(10,u);return Math.round(m*c)/c};class h extends o{constructor(u={}){super(u),this.transform=a.render(u.style),this.msg=u.message,this.initial=n(u.initial)?u.initial:"",this.float=!!u.float,this.round=u.round||2,this.inc=u.increment||1,this.min=n(u.min)?u.min:-1/0,this.max=n(u.max)?u.max:1/0,this.errorMsg=u.error||"Please Enter A Valid Value",this.validator=u.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(u){!u&&u!==0?(this.placeholder=!0,this.rendered=t.gray(this.transform.render(`${this.initial}`)),this._value=""):(this.placeholder=!1,this.rendered=this.transform.render(`${s(u,this.round)}`),this._value=s(u,this.round)),this.fire()}get value(){return this._value}parse(u){return this.float?parseFloat(u):parseInt(u)}valid(u){return u==="-"||u==="."&&this.float||i.test(u)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let u=this.value;this.value=u!==""?u:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let u=await this.validator(this.value);typeof u=="string"&&(this.errorMsg=u,u=!1),this.error=!u}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}let u=this.value;this.value=u!==""?u:this.initial,this.done=!0,this.aborted=!1,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){if(this.typed="",this.value===""&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",this.value===""&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let u=this.value.toString();if(u.length===0)return this.bell();this.value=this.parse(u=u.slice(0,-1))||"",this.value!==""&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(u,c){if(!this.valid(u))return this.bell();const p=Date.now();if(p-this.lastHit>1e3&&(this.typed=""),this.typed+=u,this.lastHit=p,this.color="cyan",u===".")return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(d.down(f(this.outputError,this.out.columns)-1)+r(this.outputError,this.out.columns)),this.out.write(r(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[a.symbol(this.done,this.aborted),t.bold(this.msg),a.delimiter(this.done),!this.done||!this.done&&!this.placeholder?t[this.color]().underline(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((u,c,p)=>u+`
${p?" ":l.pointerSmall} ${t.red().italic(c)}`,"")),this.out.write(e.line+d.to(0)+this.outputText+d.save+this.outputError+d.restore))}}return qe=h,qe}var De,Pt;function Tt(){if(Pt)return De;Pt=1;const t=P(),{cursor:o}=T(),d=A(),{clear:e,figures:a,style:l,wrap:r,entriesToDisplay:f}=D();class i extends d{constructor(s={}){super(s),this.msg=s.message,this.cursor=s.cursor||0,this.scrollIndex=s.cursor||0,this.hint=s.hint||"",this.warn=s.warn||"- This option is disabled -",this.minSelected=s.min,this.showMinError=!1,this.maxChoices=s.max,this.instructions=s.instructions,this.optionsPerPage=s.optionsPerPage||10,this.value=s.choices.map((h,m)=>(typeof h=="string"&&(h={title:h,value:m}),{title:h&&(h.title||h.value||h),description:h&&h.description,value:h&&(h.value===void 0?m:h.value),selected:h&&h.selected,disabled:h&&h.disabled})),this.clear=e("",this.out.columns),s.overrideRender||this.render()}reset(){this.value.map(s=>!s.selected),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter(s=>s.selected)}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){const s=this.value.filter(h=>h.selected);this.minSelected&&s.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){this.cursor===0?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(s=>s.selected).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const s=this.value[this.cursor];if(s.selected)s.selected=!1,this.render();else{if(s.disabled||this.value.filter(h=>h.selected).length>=this.maxChoices)return this.bell();s.selected=!0,this.render()}}toggleAll(){if(this.maxChoices!==void 0||this.value[this.cursor].disabled)return this.bell();const s=!this.value[this.cursor].selected;this.value.filter(h=>!h.disabled).forEach(h=>h.selected=s),this.render()}_(s,h){if(s===" ")this.handleSpaceToggle();else if(s==="a")this.toggleAll();else return this.bell()}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${a.arrowUp}/${a.arrowDown}: Highlight option
    ${a.arrowLeft}/${a.arrowRight}/[space]: Toggle selection
`+(this.maxChoices===void 0?`    a: Toggle all
`:"")+"    enter/return: Complete answer":""}renderOption(s,h,m,u){const c=(h.selected?t.green(a.radioOn):a.radioOff)+" "+u+" ";let p,b;return h.disabled?p=s===m?t.gray().underline(h.title):t.strikethrough().gray(h.title):(p=s===m?t.cyan().underline(h.title):h.title,s===m&&h.description&&(b=` - ${h.description}`,(c.length+p.length+b.length>=this.out.columns||h.description.split(/\r?\n/).length>1)&&(b=`
`+r(h.description,{margin:c.length,width:this.out.columns})))),c+p+t.gray(b||"")}paginateOptions(s){if(s.length===0)return t.red("No matches for this query.");let{startIndex:h,endIndex:m}=f(this.cursor,s.length,this.optionsPerPage),u,c=[];for(let p=h;p<m;p++)p===h&&h>0?u=a.arrowUp:p===m-1&&m<s.length?u=a.arrowDown:u=" ",c.push(this.renderOption(this.cursor,s[p],p,u));return`
`+c.join(`
`)}renderOptions(s){return this.done?"":this.paginateOptions(s)}renderDoneOrInstructions(){if(this.done)return this.value.filter(h=>h.selected).map(h=>h.title).join(", ");const s=[t.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&s.push(t.yellow(this.warn)),s.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(o.hide),super.render();let s=[l.symbol(this.done,this.aborted),t.bold(this.msg),l.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(s+=t.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),s+=this.renderOptions(this.value),this.out.write(this.clear+s),this.clear=e(s,this.out.columns)}}return De=i,De}var _e,qt;function Ai(){if(qt)return _e;qt=1;const t=P(),o=A(),{erase:d,cursor:e}=T(),{style:a,clear:l,figures:r,wrap:f,entriesToDisplay:i}=D(),n=(u,c)=>u[c]&&(u[c].value||u[c].title||u[c]),s=(u,c)=>u[c]&&(u[c].title||u[c].value||u[c]),h=(u,c)=>{const p=u.findIndex(b=>b.value===c||b.title===c);return p>-1?p:void 0};class m extends o{constructor(c={}){super(c),this.msg=c.message,this.suggest=c.suggest,this.choices=c.choices,this.initial=typeof c.initial=="number"?c.initial:h(c.choices,c.initial),this.select=this.initial||c.cursor||0,this.i18n={noMatches:c.noMatches||"no matches found"},this.fallback=c.fallback||this.initial,this.clearFirst=c.clearFirst||!1,this.suggestions=[],this.input="",this.limit=c.limit||10,this.cursor=0,this.transform=a.render(c.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=l("",this.out.columns),this.complete(this.render),this.render()}set fallback(c){this._fb=Number.isSafeInteger(parseInt(c))?parseInt(c):c}get fallback(){let c;return typeof this._fb=="number"?c=this.choices[this._fb]:typeof this._fb=="string"&&(c={title:this._fb}),c||this._fb||{title:this.i18n.noMatches}}moveSelect(c){this.select=c,this.suggestions.length>0?this.value=n(this.suggestions,c):this.value=this.fallback.value,this.fire()}async complete(c){const p=this.completing=this.suggest(this.input,this.choices),b=await p;if(this.completing!==p)return;this.suggestions=b.map((O,S,g)=>({title:s(g,S),value:n(g,S),description:O.description})),this.completing=!1;const x=Math.max(b.length-1,0);this.moveSelect(Math.min(x,this.select)),c&&c()}reset(){this.input="",this.complete(()=>{this.moveSelect(this.initial!==void 0?this.initial:0),this.render()}),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(c,p){let b=this.input.slice(0,this.cursor),x=this.input.slice(this.cursor);this.input=`${b}${c}${x}`,this.cursor=b.length+1,this.complete(this.render),this.render()}delete(){if(this.cursor===0)return this.bell();let c=this.input.slice(0,this.cursor-1),p=this.input.slice(this.cursor);this.input=`${c}${p}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let c=this.input.slice(0,this.cursor),p=this.input.slice(this.cursor+1);this.input=`${c}${p}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){this.select===0?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(c,p,b,x){let O,S=b?r.arrowUp:x?r.arrowDown:" ",g=p?t.cyan().underline(c.title):c.title;return S=(p?t.cyan(r.pointer)+" ":"  ")+S,c.description&&(O=` - ${c.description}`,(S.length+g.length+O.length>=this.out.columns||c.description.split(/\r?\n/).length>1)&&(O=`
`+f(c.description,{margin:3,width:this.out.columns}))),S+" "+g+t.gray(O||"")}render(){if(this.closed)return;this.firstRender?this.out.write(e.hide):this.out.write(l(this.outputText,this.out.columns)),super.render();let{startIndex:c,endIndex:p}=i(this.select,this.choices.length,this.limit);if(this.outputText=[a.symbol(this.done,this.aborted,this.exited),t.bold(this.msg),a.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const b=this.suggestions.slice(c,p).map((x,O)=>this.renderOption(x,this.select===O+c,O===0&&c>0,O+c===p-1&&p<this.choices.length)).join(`
`);this.outputText+=`
`+(b||t.gray(this.fallback.title))}this.out.write(d.line+e.to(0)+this.outputText)}}return _e=m,_e}var Ie,Dt;function ji(){if(Dt)return Ie;Dt=1;const t=P(),{cursor:o}=T(),d=Tt(),{clear:e,style:a,figures:l}=D();class r extends d{constructor(i={}){i.overrideRender=!0,super(i),this.inputValue="",this.clear=e("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){this.cursor===0?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(i=>i.selected).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const i=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter(s=>this.inputValue?!!(typeof s.title=="string"&&s.title.toLowerCase().includes(this.inputValue.toLowerCase())||typeof s.value=="string"&&s.value.toLowerCase().includes(this.inputValue.toLowerCase())):!0);const n=this.filteredOptions.findIndex(s=>s===i);this.cursor=n<0?0:n,this.render()}handleSpaceToggle(){const i=this.filteredOptions[this.cursor];if(i.selected)i.selected=!1,this.render();else{if(i.disabled||this.value.filter(n=>n.selected).length>=this.maxChoices)return this.bell();i.selected=!0,this.render()}}handleInputChange(i){this.inputValue=this.inputValue+i,this.updateFilteredOptions()}_(i,n){i===" "?this.handleSpaceToggle():this.handleInputChange(i)}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${l.arrowUp}/${l.arrowDown}: Highlight option
    ${l.arrowLeft}/${l.arrowRight}/[space]: Toggle selection
    [a,b,c]/delete: Filter choices
    enter/return: Complete answer
`:""}renderCurrentInput(){return`
Filtered results for: ${this.inputValue?this.inputValue:t.gray("Enter something to filter")}
`}renderOption(i,n,s){let h;return n.disabled?h=i===s?t.gray().underline(n.title):t.strikethrough().gray(n.title):h=i===s?t.cyan().underline(n.title):n.title,(n.selected?t.green(l.radioOn):l.radioOff)+"  "+h}renderDoneOrInstructions(){if(this.done)return this.value.filter(n=>n.selected).map(n=>n.title).join(", ");const i=[t.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&i.push(t.yellow(this.warn)),i.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(o.hide),super.render();let i=[a.symbol(this.done,this.aborted),t.bold(this.msg),a.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(i+=t.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),i+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+i),this.clear=e(i,this.out.columns)}}return Ie=r,Ie}var Ae,_t;function Ni(){if(_t)return Ae;_t=1;const t=P(),o=A(),{style:d,clear:e}=D(),{erase:a,cursor:l}=T();class r extends o{constructor(i={}){super(i),this.msg=i.message,this.value=i.initial,this.initialValue=!!i.initial,this.yesMsg=i.yes||"yes",this.yesOption=i.yesOption||"(Y/n)",this.noMsg=i.no||"no",this.noOption=i.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(i,n){return i.toLowerCase()==="y"?(this.value=!0,this.submit()):i.toLowerCase()==="n"?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(l.hide):this.out.write(e(this.outputText,this.out.columns)),super.render(),this.outputText=[d.symbol(this.done,this.aborted),t.bold(this.msg),d.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:t.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(a.line+l.to(0)+this.outputText))}}return Ae=r,Ae}var je,It;function Fi(){return It||(It=1,je={TextPrompt:yi(),SelectPrompt:Si(),TogglePrompt:$i(),DatePrompt:_i(),NumberPrompt:Ii(),MultiselectPrompt:Tt(),AutocompletePrompt:Ai(),AutocompleteMultiselectPrompt:ji(),ConfirmPrompt:Ni()}),je}var At;function Bi(){return At||(At=1,function(t){const o=t,d=Fi(),e=r=>r;function a(r,f,i={}){return new Promise((n,s)=>{const h=new d[r](f),m=i.onAbort||e,u=i.onSubmit||e,c=i.onExit||e;h.on("state",f.onState||e),h.on("submit",p=>n(u(p))),h.on("exit",p=>n(c(p))),h.on("abort",p=>s(m(p)))})}o.text=r=>a("TextPrompt",r),o.password=r=>(r.style="password",o.text(r)),o.invisible=r=>(r.style="invisible",o.text(r)),o.number=r=>a("NumberPrompt",r),o.date=r=>a("DatePrompt",r),o.confirm=r=>a("ConfirmPrompt",r),o.list=r=>{const f=r.separator||",";return a("TextPrompt",r,{onSubmit:i=>i.split(f).map(n=>n.trim())})},o.toggle=r=>a("TogglePrompt",r),o.select=r=>a("SelectPrompt",r),o.multiselect=r=>{r.choices=[].concat(r.choices||[]);const f=i=>i.filter(n=>n.selected).map(n=>n.value);return a("MultiselectPrompt",r,{onAbort:f,onSubmit:f})},o.autocompleteMultiselect=r=>{r.choices=[].concat(r.choices||[]);const f=i=>i.filter(n=>n.selected).map(n=>n.value);return a("AutocompleteMultiselectPrompt",r,{onAbort:f,onSubmit:f})};const l=(r,f)=>Promise.resolve(f.filter(i=>i.title.slice(0,r.length).toLowerCase()===r.toLowerCase()));o.autocomplete=r=>(r.suggest=r.suggest||l,r.choices=[].concat(r.choices||[]),a("AutocompletePrompt",r))}(re)),re}var Ne,jt;function Yi(){if(jt)return Ne;jt=1;const t=Bi(),o=["suggest","format","onState","validate","onRender","type"],d=()=>{};async function e(f=[],{onSubmit:i=d,onCancel:n=d}={}){const s={},h=e._override||{};f=[].concat(f);let m,u,c,p,b,x;const O=async(S,g,v=!1)=>{if(!(!v&&S.validate&&S.validate(g)!==!0))return S.format?await S.format(g,s):g};for(u of f)if({name:p,type:b}=u,typeof b=="function"&&(b=await b(m,{...s},u),u.type=b),!!b){for(let S in u){if(o.includes(S))continue;let g=u[S];u[S]=typeof g=="function"?await g(m,{...s},x):g}if(x=u,typeof u.message!="string")throw new Error("prompt message is required");if({name:p,type:b}=u,t[b]===void 0)throw new Error(`prompt type (${b}) is not defined`);if(h[u.name]!==void 0&&(m=await O(u,h[u.name]),m!==void 0)){s[p]=m;continue}try{m=e._injected?a(e._injected,u.initial):await t[b](u),s[p]=m=await O(u,m,!0),c=await i(u,m,s)}catch{c=!await n(u,s)}if(c)return s}return s}function a(f,i){const n=f.shift();if(n instanceof Error)throw n;return n===void 0?i:n}function l(f){e._injected=(e._injected||[]).concat(f)}function r(f){e._override=Object.assign({},f)}return Ne=Object.assign(e,{prompt:e,prompts:t,inject:l,override:r}),Ne}var ki=Yi();const Nt=Y(ki);var L={exports:{}},Ft;function Hi(){if(Ft)return L.exports;Ft=1;let t=process||{},o=t.argv||[],d=t.env||{},e=!(d.NO_COLOR||o.includes("--no-color"))&&(!!d.FORCE_COLOR||o.includes("--color")||t.platform==="win32"||(t.stdout||{}).isTTY&&d.TERM!=="dumb"||!!d.CI),a=(f,i,n=f)=>s=>{let h=""+s,m=h.indexOf(i,f.length);return~m?f+l(h,i,n,m)+i:f+h+i},l=(f,i,n,s)=>{let h="",m=0;do h+=f.substring(m,s)+n,m=s+i.length,s=f.indexOf(i,m);while(~s);return h+f.substring(m)},r=(f=e)=>{let i=f?a:()=>String;return{isColorSupported:f,reset:i("\x1B[0m","\x1B[0m"),bold:i("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:i("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:i("\x1B[3m","\x1B[23m"),underline:i("\x1B[4m","\x1B[24m"),inverse:i("\x1B[7m","\x1B[27m"),hidden:i("\x1B[8m","\x1B[28m"),strikethrough:i("\x1B[9m","\x1B[29m"),black:i("\x1B[30m","\x1B[39m"),red:i("\x1B[31m","\x1B[39m"),green:i("\x1B[32m","\x1B[39m"),yellow:i("\x1B[33m","\x1B[39m"),blue:i("\x1B[34m","\x1B[39m"),magenta:i("\x1B[35m","\x1B[39m"),cyan:i("\x1B[36m","\x1B[39m"),white:i("\x1B[37m","\x1B[39m"),gray:i("\x1B[90m","\x1B[39m"),bgBlack:i("\x1B[40m","\x1B[49m"),bgRed:i("\x1B[41m","\x1B[49m"),bgGreen:i("\x1B[42m","\x1B[49m"),bgYellow:i("\x1B[43m","\x1B[49m"),bgBlue:i("\x1B[44m","\x1B[49m"),bgMagenta:i("\x1B[45m","\x1B[49m"),bgCyan:i("\x1B[46m","\x1B[49m"),bgWhite:i("\x1B[47m","\x1B[49m"),blackBright:i("\x1B[90m","\x1B[39m"),redBright:i("\x1B[91m","\x1B[39m"),greenBright:i("\x1B[92m","\x1B[39m"),yellowBright:i("\x1B[93m","\x1B[39m"),blueBright:i("\x1B[94m","\x1B[39m"),magentaBright:i("\x1B[95m","\x1B[39m"),cyanBright:i("\x1B[96m","\x1B[39m"),whiteBright:i("\x1B[97m","\x1B[39m"),bgBlackBright:i("\x1B[100m","\x1B[49m"),bgRedBright:i("\x1B[101m","\x1B[49m"),bgGreenBright:i("\x1B[102m","\x1B[49m"),bgYellowBright:i("\x1B[103m","\x1B[49m"),bgBlueBright:i("\x1B[104m","\x1B[49m"),bgMagentaBright:i("\x1B[105m","\x1B[49m"),bgCyanBright:i("\x1B[106m","\x1B[49m"),bgWhiteBright:i("\x1B[107m","\x1B[49m")}};return L.exports=r(),L.exports.createColors=r,L.exports}var Li=Hi();const Wi=Y(Li),{blue:Vi,blueBright:hr,cyan:Bt,green:ur,greenBright:cr,magenta:Yt,red:kt,redBright:dr,reset:F,yellow:zi}=Wi,B=mi(process.argv.slice(2),{default:{help:!1},alias:{h:"help",t:"template"},string:["_"]}),Fe=process.cwd(),Ui=`Usage: create-qnets [OPTION]... [DIRECTORY]

Create a new Qnets project in JavaScript or TypeScript.
With no arguments, start the CLI in interactive mode.

Options:
  -t, --template NAME        use a specific template

Available templates:
${Bt("react-ts       react")}
${Yt("koa2           koa2")}`,Be=[{name:"koa2",display:"Koa2",color:Yt,variants:[{name:"koa2",display:"JavaScript",color:zi}]},{name:"react",display:"React",color:Bt,variants:[{name:"react-ts",display:"TypeScript",color:Vi}]}],Ht=Be.map(t=>t.variants.map(o=>o.name)).reduce((t,o)=>t.concat(o),[]),Ki={_gitignore:".gitignore"},Ye="qnets-project";async function Gi(){const t=Lt(B._[0]),o=B.template||B.t;if(B.help){console.log(Ui);return}let d=t||Ye;const e=()=>R.basename(R.resolve(d));let a;Nt.override({overwrite:B.overwrite});try{a=await Nt([{type:t?null:"text",name:"projectName",message:F("Project name:"),initial:Ye,onState:g=>{d=Lt(g.value)||Ye}},{type:()=>!M.existsSync(d)||Xi(d)?null:"select",name:"overwrite",message:()=>(d==="."?"Current directory":`Target directory "${d}"`)+" is not empty. Please choose how to proceed:",initial:0,choices:[{title:"Cancel operation",value:"no"},{title:"Remove existing files and continue",value:"yes"},{title:"Ignore files and continue",value:"ignore"}]},{type:(g,{overwrite:v})=>{if(v==="no")throw new Error(kt("\u2716")+" Operation cancelled");return null},name:"overwriteChecker"},{type:()=>Vt(e())?null:"text",name:"packageName",message:F("Package name:"),initial:()=>Ji(e()),validate:g=>Vt(g)||"Invalid package.json name"},{type:o&&Ht.includes(o)?null:"select",name:"framework",message:typeof o=="string"&&!Ht.includes(o)?F(`"${o}" isn't a valid template. Please choose from below: `):F("Select a framework:"),initial:0,choices:Be.map(g=>{const v=g.color;return{title:v(g.display||g.name),value:g}})},{type:g=>typeof g=="object"?"select":null,name:"variant",message:F("Select a variant:"),choices:g=>g.variants.map(v=>{const y=v.color;return{title:y(v.display||v.name),value:v.name}})}],{onCancel:()=>{throw new Error(kt("\u2716")+" Operation cancelled")}})}catch(g){console.log(g.message);return}const{framework:l,overwrite:r,packageName:f,variant:i}=a,n=R.join(Fe,d);r==="yes"?Qi(n):M.existsSync(n)||M.mkdirSync(n,{recursive:!0});let s=i||l?.name||o;const h=er(process.env.npm_config_user_agent),m=h?h.name:"npm",u=m==="yarn"&&h?.version.startsWith("1."),{customCommand:c}=Be.flatMap(g=>g.variants).find(g=>g.name===s)??{};if(c){const g=c.replace(/^npm create /,()=>m==="bun"?"bun x create-":`${m} create `).replace("@latest",()=>u?"":"@latest").replace(/^npm exec/,()=>m==="pnpm"?"pnpm dlx":m==="yarn"&&!u?"yarn dlx":m==="bun"?"bun x":"npm exec"),[v,...y]=g.split(" "),w=y.map(C=>C.replace("TARGET_DIR",()=>d)),{status:$}=ci.sync(v,w,{stdio:"inherit"});process.exit($??0)}console.log(`
Scaffolding project in ${n}...`);const p=R.resolve(zt(import.meta.url),"../..",`template-${s}`),b=(g,v)=>{const y=R.join(n,Ki[g]??g);v?M.writeFileSync(y,v):Wt(R.join(p,g),y)},x=M.readdirSync(p);for(const g of x.filter(v=>v!=="package.json"))b(g);const O=JSON.parse(M.readFileSync(R.join(p,"package.json"),"utf-8"));O.name=f||e(),b("package.json",JSON.stringify(O,null,2)+`
`);const S=R.relative(Fe,n);switch(console.log(`
Done. Now run:
`),n!==Fe&&console.log(`  cd ${S.includes(" ")?`"${S}"`:S}`),m){case"yarn":console.log("  yarn"),console.log("  yarn dev");break;default:console.log(`  ${m} install`),console.log(`  ${m} run dev`);break}}function Lt(t){return t?.trim().replace(/\/+$/g,"")}function Wt(t,o){M.statSync(t).isDirectory()?Zi(t,o):M.copyFileSync(t,o)}function Vt(t){return/^(?:@[a-z\d\-*~][a-z\d\-*._~]*\/)?[a-z\d\-~][a-z\d\-._~]*$/.test(t)}function Ji(t){return t.trim().toLowerCase().replace(/\s+/g,"-").replace(/^[._]/,"").replace(/[^a-z\d\-~]+/g,"-")}function Zi(t,o){M.mkdirSync(o,{recursive:!0});for(const d of M.readdirSync(t)){const e=R.resolve(t,d),a=R.resolve(o,d);Wt(e,a)}}function Xi(t){const o=M.readdirSync(t);return o.length===0||o.length===1&&o[0]===".git"}function Qi(t){if(M.existsSync(t))for(const o of M.readdirSync(t))o!==".git"&&M.rmSync(R.resolve(t,o),{recursive:!0,force:!0})}function er(t){if(!t)return;const o=t.split(" ")[0].split("/");return{name:o[0],version:o[1]}}Gi().catch(t=>{console.error(t)});
